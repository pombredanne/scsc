# System
Log notice syslog

# Private services (client)
## SOCKS proxy
SocksPort 0.0.0.0:<%= node["tor"]["socks-port"] %>
SocksPolicy accept 192.168.0.0/16
SocksPolicy accept 10.17.0.0/16 # Allow access from VPN
SocksPolicy reject *

## Control
ControlPort <%= node["tor"]["control-port"] %>
HashedControlPassword <%= `tor --quiet --hash-password #{node["tor"]["control-password"]}` %>

## DNS resolver, why not
DNSPort <%= node["tor"]["dns-port"] %>
AutomapHostsOnResolve 1
AutomapHostsSuffixes .exit,.onion

# Public services (relay)
## Relay -- needs to be allowed on the firewall
ORPort <%= node["tor"]["or-port"] %>
RelayBandwidthRate <%= node["tor"]["relay-bandwidth-rate"] %>
RelayBandwidthBurst <%= node["tor"]["relay-bandwidth-burst"] %>

## NOT AN EXIT NODE!!!
ExitPolicy reject *:*

## Directory mirror
DirPort <%= node["tor"]["dir-port"] %>
